<%- include('../layout/user/header.ejs') -%>

<div class="page-wrapper">
    <div style="width: 100%; height: 77px; background-color: white;"></div>
    <main class="main">
        <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
            <div class="container">
                <h1 class="page-title">My Account<span>Shop</span></h1>
            </div><!-- End .container -->
        </div><!-- End .page-header -->
        <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
            <div class="container">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item"><a href="#">Shop</a></li>
                    <li class="breadcrumb-item active" aria-current="page">My Account</li>
                </ol>
            </div><!-- End .container -->
        </nav><!-- End .breadcrumb-nav -->

        <div class="page-content">
            <div class="dashboard">
                <div class="container">
                    <div class="row">
                        <!-- side buttons  start -->
                        <aside class="col-md-4 col-lg-3">
                            <ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="tab-account-link" data-toggle="tab" href="#tab-account" role="tab" aria-controls="tab-account" aria-selected="true">My Profile</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="tab-orders-link" data-toggle="tab" href="#tab-orders" role="tab" aria-controls="tab-orders" aria-selected="false">Orders</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="tab-downloads-link" data-toggle="tab" href="#tab-downloads" role="tab" aria-controls="tab-downloads" aria-selected="false">Downloads</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address" role="tab" aria-controls="tab-address" aria-selected="false">Adresses</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link " id="tab-dashboard-link" data-toggle="tab" href="#tab-dashboard" role="tab" aria-controls="tab-dashboard" aria-selected="false">dashboard</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">Sign Out</a>
                                </li>
                            </ul>
                        </aside><!-- End .col-lg-3 --><!-- Show Addresses end -->

                        <div class="col-md-8 col-lg-9">
                            <div class="tab-content">
                                <div class="tab-pane fade " id="tab-dashboard" role="tabpanel" aria-labelledby="tab-dashboard-link">
                                    <p>Hello <span class="font-weight-normal text-dark">User</span> (not <span class="font-weight-normal text-dark">User</span>? <a href="#">Log out</a>) 
                                    <br>
                                    From your account dashboard you can view your <a href="#tab-orders" class="tab-trigger-link link-underline">recent orders</a>, manage your <a href="#tab-address" class="tab-trigger-link">shipping and billing addresses</a>, and <a href="#tab-account" class="tab-trigger-link">edit your password and account details</a>.</p>
                                </div><!-- .End .tab-pane -->

                                <div class="tab-pane fade" id="tab-orders" role="tabpanel" aria-labelledby="tab-orders-link">
                                    <p>No order has been made yet.</p>
                                    <a href="category.html" class="btn btn-outline-primary-2"><span>GO SHOP</span><i class="icon-long-arrow-right"></i></a>
                                </div><!-- .End .tab-pane -->

                                <div class="tab-pane fade" id="tab-downloads" role="tabpanel" aria-labelledby="tab-downloads-link">
                                    <p>No downloads available yet.</p>
                                    <a href="category.html" class="btn btn-outline-primary-2"><span>GO SHOP</span><i class="icon-long-arrow-right"></i></a>
                                </div><!-- .End .tab-pane -->

                                <!-- Show Addresses start -->
                                <div class="tab-pane fade" id="tab-address" role="tabpanel" aria-labelledby="tab-address-link">
                                    <p>The following addresses will be used on the checkout page by default.</p>
                                    <div class="row">
                                        <% addresses.address.forEach(function(address, index) { %>
                                          <div class="col-lg-6">
                                            <div class="card card-dashboard">
                                              <div class="card-body">
                                                <h3 class="card-title">Address <%= index + 1 %></h3>
                                                <p>Name: <%= address.fullName %><br>
                                                Email: <%= address.email %><br>
                                                Mobile: <%= address.mobile %><br>
                                                State: <%= address.state %><br>
                                                City: <%= address.city %><br>
                                                House Name: <%= address.houseName %><br>
                                                Pincode: <%= address.pin %><br>
                                                <a href="/editAddress?ind=<%= index %>" >Edit <i class="icon-edit"></i></a>
                                            </div>
                                            </div>
                                          </div>
                                        <% }); %>
                                      </div>
                                    <a  class="btn btn-primary" id="tab-addAddress-link" data-toggle="tab" href="#tab-addAddress" role="tab" aria-controls="tab-addAddress" aria-selected="false">Add Address</a>
                                </div><!-- Show Addresses end -->

                                <!-- Add address form start -->
                                <div class="tab-pane fade" id="tab-addAddress" role="tabpanel" aria-labelledby="tab-addAddress-link">
                                    <button class="btn btn-close" id="closeAddAddressForm" style="font-size: 20px;font-weight: 100;color:#ebebeb;"><i class="fa-solid fa-xmark " ></i></button>
                                    <form action="/addAddress" method="post">
                                        <br>
                                        <label>Full name *</label>
                                        <input type="text" class="form-control" name="name" required>
                                    <div class="row">                                       
                                        <div class="col-sm-6">
                                              <label>Email *</label>
                                              <input type="email" class="form-control" name="email" required>
                                          </div><!-- End .col-sm-6 -->

                                          <div class="col-sm-6">
                                            <label>Mobile *</label>
                                            <input type="number" class="form-control" name="mobile" required>
                                          </div><!-- End .col-sm-6 -->

                                          <div class="col-sm-6">
                                              <label>State *</label>
                                              <input type="text" class="form-control" name="state" required>
                                          </div><!-- End .col-sm-6 -->

                                          <div class="col-sm-6">
                                              <label>City *</label>
                                              <input type="text" class="form-control" name="city" required>
                                          </div><!-- End .col-sm-6 -->

                                          <div class="col-sm-6">
                                              <label>Pincode *</label>
                                              <input type="number" class="form-control" name="pincode" required>
                                          </div><!-- End .col-sm-6 -->
                                          
                                          <div class="col-sm-6">
                                            <label>House name *</label>
                                            <input type="text" class="form-control" name="house" required>
                                        </div><!-- End .col-sm-6 -->                                         
                                    </div><!-- End .row -->                                   

                                        <button type="submit" class="btn btn-outline-primary-2">
                                          <span>Add Address</span>
                                          <i class="icon-long-arrow-right"></i>
                                        </button>
                                      </form>
                                </div><!-- Add address form end -->

                                <!-- user profiel start -->
                                <div class="tab-pane fade show active" id="tab-account"  role="tabpanel" aria-labelledby="tab-account-link">
                                    <div class="circle-image">
                                        <img src="user/images/product-09.jpg" alt="Image" />
                                    </div>
                                    <br>
                                    <br>
                                    <div class="user-details">
                                        <h2><%= user.name %></h2>
                                        <p>Email: <%= user.email %></p>
                                        <p>Mobile: <%= user.mobile %></p>
                                        <p>Location: New York, USA</p>
                                        <button id="editProfileButton" class="btn btn-outline-primary-2">
                                            <span>Edit Profile</span>
                                            <i class="icon-long-arrow-right"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div id="editProfileForm" style="display: none;">
                                    <form action="/editProfile" method="post" enctype="multipart/form-data">
                                        <div class="text-center mb-4">
                                            <div class="custom-file-upload">
                                                <div class="circular-image-input">
                                                    <img src="user/images/product-02.jpg" id="profile-picture" alt="Profile Picture">
                                                    <input type="file" id="profile-picture-upload" accept="image/*" onchange="previewProfilePicture(event)">
                                                </div>
                                            </div>
                                        </div>
                                        <input type="text" name="name"  value="<%= user.name %>">
                                        <input type="text" name="email" value="<%= user.email %>" >
                                        <input type="text" name="mobile" value="<%= user.mobile  %>">
                                        <button type="submit" class="btn btn-outline-primary-2">
                                            <span>Save change</span>
                                            <i class="icon-long-arrow-right"></i>
                                        </button>
                                    </form>
                                </div>
                                

                            </div>
                        </div><!-- End .col-lg-9 -->
                    </div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .dashboard -->
        </div><!-- End .page-content -->
    </main><!-- End .main -->
</div><!-- End .page-wrapper -->

<%- include('../layout/user/footer.ejs') -%>